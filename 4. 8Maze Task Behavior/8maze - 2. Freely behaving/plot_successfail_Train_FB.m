function [x,y,x1,y1,datapT,dataps,datapf] = plot_successfail_Train_FB(FB_8maze,n)
% Author: James Hope, Biosensing and Biorobotics Lab, 
% Department of Mechanical Engineering, University of Minnesota
% Contact: suhasabk@umn.edu

% total number of wrong way trials 

M1w = [FB_8maze.M1D1T.wrongway;...
      (FB_8maze.M1D2T.wrongway);...
      (FB_8maze.M1D3T.wrongway);...
      (FB_8maze.M1D4T.wrongway);...
      (FB_8maze.M1D5T.wrongway)];

M2w = [FB_8maze.M2D1T.wrongway;...
      (FB_8maze.M2D2T.wrongway);...
      (FB_8maze.M2D3T.wrongway);...
      (FB_8maze.M2D4T.wrongway);...
      (FB_8maze.M2D5T.wrongway)];
  
M3w = [FB_8maze.M3D1T.wrongway;...
      (FB_8maze.M3D2T.wrongway);...
      (FB_8maze.M3D3T.wrongway);...
      (FB_8maze.M3D4T.wrongway);...
      (FB_8maze.M3D5T.wrongway)];

M4w = [FB_8maze.M4D1T.wrongway;...
      (FB_8maze.M4D2T.wrongway);...
      (FB_8maze.M4D3T.wrongway);...
      (FB_8maze.M4D4T.wrongway);...
      (FB_8maze.M4D5T.wrongway)]; 
  
M5w = [FB_8maze.M5D1T.wrongway;...
      (FB_8maze.M5D2T.wrongway);...
      (FB_8maze.M5D3T.wrongway)];
  
M6w = [FB_8maze.M6D1T.wrongway;...
      (FB_8maze.M6D2T.wrongway);...
      (FB_8maze.M6D3T.wrongway);...
      (FB_8maze.M6D4T.wrongway)];
  
M7w = [FB_8maze.M7D1T.wrongway;...
      (FB_8maze.M7D2T.wrongway);...
      (FB_8maze.M7D3T.wrongway)];
  
M8w = [FB_8maze.M8D1T.wrongway;...
      (FB_8maze.M8D2T.wrongway);...
      (FB_8maze.M8D3T.wrongway)];
  
% total number of correct trials 
M1s = [FB_8maze.M1D1T.correct;...
      (FB_8maze.M1D2T.correct);...
      (FB_8maze.M1D3T.correct);...
      (FB_8maze.M1D4T.correct);...
      (FB_8maze.M1D5T.correct)];

M2s = [FB_8maze.M2D1T.correct;...
      (FB_8maze.M2D2T.correct);...
      (FB_8maze.M2D3T.correct);...
      (FB_8maze.M2D4T.correct);...
      (FB_8maze.M2D5T.correct)];
  
M3s = [FB_8maze.M3D1T.correct;...
      (FB_8maze.M3D2T.correct);...
      (FB_8maze.M3D3T.correct);...
      (FB_8maze.M3D4T.correct);...
      (FB_8maze.M3D5T.correct)];

M4s = [FB_8maze.M4D1T.correct;...
      (FB_8maze.M4D2T.correct);...
      (FB_8maze.M4D3T.correct);...
      (FB_8maze.M4D4T.correct);...
      (FB_8maze.M4D5T.correct)]; 
  
M5s = [FB_8maze.M5D1T.correct;...
      (FB_8maze.M5D2T.correct);...
      (FB_8maze.M5D3T.correct)];
  
M6s = [FB_8maze.M6D1T.correct;...
      (FB_8maze.M6D2T.correct);...
      (FB_8maze.M6D3T.correct);...
      (FB_8maze.M6D4T.correct)];
  
M7s = [FB_8maze.M7D1T.correct;...
      (FB_8maze.M7D2T.correct);...
      (FB_8maze.M7D3T.correct)];
  
M8s = [FB_8maze.M8D1T.correct;...
      (FB_8maze.M8D2T.correct);...
      (FB_8maze.M8D3T.correct)];

  M1p = M1s./(M1s+M1w).*100;
  M2p = M2s./(M2s+M2w).*100;
  M3p = M3s./(M3s+M3w).*100;
  M4p = M4s./(M4s+M4w).*100;
  M5p = M5s./(M5s+M5w).*100;
  M6p = M6s./(M6s+M6w).*100;
  M7p = M7s./(M7s+M7w).*100;
  M8p = M8s./(M8s+M8w).*100;
  
      % find trend
    x = [[1:length(M1p)],[1:length(M2p)],[1:length(M3p)],[1:length(M4p)],...
        [1:length(M5p)],[1:length(M6p)],[1:length(M7p)],[1:length(M8p)]];
    y = [M1p;M2p;M3p;M4p;M5p;M6p;M7p;M8p]';
    p = polyfit(x,y,n);
    x1 = 1:5;
    y1 = polyval(p,x1);
    [datapT] = mean_std(M1p,M2p,M3p,M4p,M5p,M6p,M7p,M8p);
    
        figure
        hold on
        plot(M1p,'-','Color',[0.3010 0.7450 0.9330])
        plot(M2p,'-','Color',[0.3010 0.7450 0.9330])
        plot(M3p,'-','Color',[0.3010 0.7450 0.9330])
        plot(M4p,'-','Color',[0.3010 0.7450 0.9330])
        plot(M5p,'-','Color',[0.3010 0.7450 0.9330])
        plot(M6p,'-','Color',[0.3010 0.7450 0.9330])
        plot(M7p,'-','Color',[0.3010 0.7450 0.9330])
        plot(M8p,'-','Color',[0.3010 0.7450 0.9330])
        plot(x1,y1,'-','Color',[0.3010 0.7450 0.9330],'LineWidth',4)
        ylim([0 100])
        title('Training')
        xlabel('session')
        ylabel('success rate (%)')
        hold on
        plot(x1,datapT(:,1),'-','Color',[0.3010 0.7450 0.9330],'LineWidth',4)    
 
 
    [dataps] = mean_std(M1s,M2s,M3s,M4s,M5s,M6s,M7s,M8s);
    [datapf] = mean_std(M1w,M2w,M3w,M4w,M5w,M6w,M7w,M8w);
        
    
    
end

